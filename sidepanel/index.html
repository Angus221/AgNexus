<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AG Nexus</title>
  <link rel="stylesheet" href="styles/main.css">
</head>
<body>
  <div class="app-container">
    <!-- 头部区域 -->
    <header class="header">
      <!-- 标签栏 - 左右分布 -->
      <nav class="tab-bar">
        <div class="tab-group-left">
          <div class="tab-item active" data-tab="assistant">
            <span class="tab-icon">
              <img src="../icons/icon.jpg" alt="Assistant" style="width: 20px; height: 20px; border-radius: 50%; object-fit: cover;">
            </span>
            <span class="tab-label">助理</span>
          </div>
          <div class="tab-item" data-tab="navigation">
            <span class="tab-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"/><polygon points="16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76"/>
              </svg>
            </span>
            <span class="tab-label">导航</span>
          </div>
          <div class="tab-item" data-tab="command">
            <span class="tab-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="4 17 10 11 4 5"/><line x1="12" x2="20" y1="19" y2="19"/>
              </svg>
            </span>
            <span class="tab-label">指令</span>
          </div>
          <div class="tab-item" data-tab="prompt">
            <span class="tab-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                <path d="M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5"/>
                <path d="M9 18h6"/><path d="M10 22h4"/>
              </svg>
            </span>
            <span class="tab-label">提示词</span>
          </div>
          <div class="tab-item" data-tab="todo">
            <span class="tab-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="9 11 12 14 22 4"/><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"/>
              </svg>
            </span>
            <span class="tab-label">待办</span>
          </div>
        </div>
        <div class="tab-group-right">
          <div class="tab-item tab-settings" id="btn-more">
            <span class="tab-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="1"/><circle cx="12" cy="5" r="1"/><circle cx="12" cy="19" r="1"/>
              </svg>
            </span>
            <span class="tab-label">更多</span>
          </div>
          <!-- 下拉菜单 -->
          <div class="dropdown-menu" id="more-menu">
            <div class="dropdown-item" id="menu-vault">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect width="18" height="11" x="3" y="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/>
              </svg>
              <span>账户密钥</span>
            </div>
            <div class="dropdown-item" id="menu-settings">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/>
                <circle cx="12" cy="12" r="3"/>
              </svg>
              <span>设置</span>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <!-- 内容区域 -->
    <main class="content">
      <!-- 导航面板 -->
      <section class="panel active" id="panel-navigation">
        <!-- 快捷导航 -->
        <div class="section-block">
          <div class="section-header">
            <span class="section-title">快捷导航</span>
            <div class="section-actions">
              <button class="btn btn-icon btn-ghost tooltip" data-tooltip="添加" id="nav-add">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M5 12h14"/><path d="M12 5v14"/>
                </svg>
              </button>
            </div>
          </div>
          <div class="nav-grid" id="nav-list"></div>
        </div>

        <!-- 收藏网页 -->
        <div class="section-block" style="margin-top: var(--spacing-5);">
          <div class="section-header">
            <span class="section-title">收藏网页</span>
            <div class="section-actions">
              <button class="btn btn-icon btn-ghost tooltip" data-tooltip="添加收藏" id="bookmark-add">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M5 12h14"/><path d="M12 5v14"/>
                </svg>
              </button>
            </div>
          </div>
          <div class="search-box">
            <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/>
            </svg>
            <input type="text" class="input search-input" id="bookmark-search" placeholder="搜索收藏...">
          </div>
          <div id="bookmark-list"></div>
          <div class="pagination" id="bookmark-pagination"></div>
        </div>
      </section>

      <!-- 指令面板 -->
      <section class="panel" id="panel-command">
        <div class="section-header">
          <span class="section-title">指令集</span>
          <div class="section-actions">
            <button class="btn btn-icon btn-ghost tooltip" data-tooltip="添加" id="cmd-add">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M5 12h14"/><path d="M12 5v14"/>
              </svg>
            </button>
          </div>
        </div>
        <div class="search-box">
          <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/>
          </svg>
          <input type="text" class="input search-input" id="cmd-search" placeholder="搜索指令...">
        </div>
        <div id="cmd-list"></div>
      </section>

      <!-- 提示词面板 -->
      <section class="panel" id="panel-prompt">
        <div class="section-header">
          <span class="section-title">提示词库</span>
          <div class="section-actions">
            <button class="btn btn-icon btn-ghost tooltip" data-tooltip="添加" id="prompt-add">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M5 12h14"/><path d="M12 5v14"/>
              </svg>
            </button>
          </div>
        </div>
        <div class="search-box">
          <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/>
          </svg>
          <input type="text" class="input search-input" id="prompt-search" placeholder="搜索提示词...">
        </div>
        <div id="prompt-list"></div>
      </section>

      <!-- 待办面板 -->
      <section class="panel" id="panel-todo">
        <!-- 今日统计 -->
        <div class="todo-stats" id="todo-stats"></div>

        <div class="section-header">
          <span class="section-title">待办清单</span>
          <div class="section-actions">
            <button class="btn btn-icon btn-ghost tooltip" data-tooltip="添加" id="todo-add-btn">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M5 12h14"/><path d="M12 5v14"/>
              </svg>
            </button>
          </div>
        </div>
        <div id="todo-list"></div>
      </section>

      <!-- 助理面板 -->
      <section class="panel" id="panel-assistant">
        <div id="chat-messages"></div>
      </section>

      <!-- 账户密钥面板 -->
      <section class="panel" id="panel-vault">
        <div class="section-header">
          <span class="section-title">账户密钥</span>
          <button class="btn btn-primary btn-sm" id="vault-panel-add" style="display: none;">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M5 12h14"/><path d="M12 5v14"/>
            </svg>
            添加
          </button>
        </div>

        <!-- 未验证提示 -->
        <div id="vault-locked-hint" style="text-align: center; padding: 48px 16px; color: var(--text-secondary);">
          <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="margin-bottom: 16px; opacity: 0.5;">
            <rect width="18" height="11" x="3" y="11" rx="2" ry="2"/>
            <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
          </svg>
          <div style="font-size: 16px; margin-bottom: 8px;">账户密钥已锁定</div>
          <div style="font-size: 14px;">请从右上角菜单中选择"账户密钥"进行验证</div>
        </div>

        <!-- 添加/编辑表单 -->
        <div id="vault-form-container" style="display: none; margin-bottom: var(--spacing-4);">
          <div style="background: var(--bg-surface); border: 1px solid var(--border-default); border-radius: var(--radius-md); padding: var(--spacing-4);">
            <h4 id="vault-form-title" style="margin-bottom: var(--spacing-3); font-size: 16px;">添加账户</h4>

            <div class="form-group">
              <label class="form-label">类型</label>
              <div style="display: flex; gap: 12px;">
                <label style="display: flex; align-items: center; cursor: pointer;">
                  <input type="radio" name="vault-item-type" value="password" checked style="margin-right: 6px;">
                  <span>密码</span>
                </label>
                <label style="display: flex; align-items: center; cursor: pointer;">
                  <input type="radio" name="vault-item-type" value="apikey" style="margin-right: 6px;">
                  <span>API Key</span>
                </label>
              </div>
            </div>

            <div class="form-group">
              <label class="form-label">名称</label>
              <input type="text" class="input" id="vault-item-name" placeholder="例如：OpenAI API Key">
            </div>

            <!-- 账户字段（仅密码类型） -->
            <div class="form-group" id="vault-field-account">
              <label class="form-label">账户</label>
              <input type="text" class="input" id="vault-item-account" placeholder="用户名或邮箱">
            </div>

            <!-- 密码/密钥字段 -->
            <div class="form-group">
              <label class="form-label" id="vault-field-value-label">密码</label>
              <input type="password" class="input" id="vault-item-value" placeholder="输入密码">
            </div>

            <div class="form-group">
              <label class="form-label">备注 (可选)</label>
              <input type="text" class="input" id="vault-item-note" placeholder="备注信息">
            </div>

            <div style="display: flex; gap: var(--spacing-2); justify-content: flex-end;">
              <button class="btn btn-secondary" id="vault-item-cancel">取消</button>
              <button class="btn btn-primary" id="vault-item-save">保存</button>
            </div>
          </div>
        </div>

        <!-- 账户列表 -->
        <div id="vault-panel-list"></div>
      </section>

      <!-- 设置面板 -->
      <section class="panel" id="panel-settings">
        <div class="section-header">
          <span class="section-title">设置</span>
        </div>

        <div class="settings-section">
          <h4 class="settings-subtitle">外观</h4>
          <div class="form-group">
            <label class="form-label">主题模式</label>
            <div style="display: flex; gap: 12px;">
              <label class="theme-radio-option">
                <input type="radio" name="theme-mode" value="light" id="theme-light" checked>
                <span class="theme-radio-label">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/>
                  </svg>
                  <span>亮色</span>
                </span>
              </label>
              <label class="theme-radio-option">
                <input type="radio" name="theme-mode" value="dark" id="theme-dark">
                <span class="theme-radio-label">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/>
                  </svg>
                  <span>暗色</span>
                </span>
              </label>
            </div>
          </div>
        </div>

        <div class="settings-section">
          <h4 class="settings-subtitle">AI 模型配置</h4>
          <div class="form-group">
            <label class="form-label">API 地址</label>
            <input type="text" class="input" id="settings-api-url" placeholder="https://dashscope.aliyuncs.com/compatible-mode/v1">
            <p class="form-hint">阿里百炼 OpenAI 兼容接口</p>
          </div>
          <div class="form-group">
            <label class="form-label">API 密钥</label>
            <input type="password" class="input" id="settings-api-key" placeholder="sk-...">
          </div>
          <div class="form-group">
            <label class="form-label">模型名称</label>
            <input type="text" class="input" id="settings-model" placeholder="qwen-turbo">
          </div>
        </div>

        <div class="settings-section">
          <h4 class="settings-subtitle">悬浮球</h4>
          <div class="form-group">
            <label class="toggle-label">
              <input type="checkbox" id="settings-float-ball" class="toggle-input">
              <span class="toggle-switch"></span>
              <span>启用悬浮球提醒</span>
            </label>
            <p class="form-hint">开启后在页面显示悬浮球，提前5分钟提醒待办</p>
          </div>
        </div>

        <div class="settings-section">
          <h4 class="settings-subtitle">数据管理</h4>
          <div class="form-group">
            <label class="checkbox-label">
              <input type="checkbox" id="export-include-secrets">
              <span>导出时包含敏感信息（API密钥、账户密钥等）</span>
            </label>
          </div>
          <div style="display: flex; gap: var(--spacing-2);">
            <button class="btn btn-secondary" id="settings-export">导出数据</button>
            <button class="btn btn-secondary" id="settings-import">导入数据</button>
          </div>
          <p style="margin-top: var(--spacing-2); font-size: 12px; color: var(--text-secondary);">
            导出内容包括：导航、指令、提示词、待办、聊天记录、用户信息、记忆库等
          </p>
        </div>

        <div class="settings-section">
          <button class="btn btn-primary" id="settings-save" style="width: 100%;">保存配置</button>
        </div>
      </section>
    </main>

    <!-- 底部输入区 (仅助理面板) -->
    <footer class="footer" id="chat-footer">
      <div class="input-group">
        <button class="btn btn-icon btn-ghost input-action input-action-left" id="chat-clear" title="清除聊天记录" style="width:36px; height:36px;">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/>
          </svg>
        </button>
        <input type="text" class="input input-chat" id="chat-input" placeholder="输入你的想法，或让我帮你配置..." autocomplete="off" spellcheck="false">
        <button class="btn btn-icon btn-primary input-action input-action-right" id="chat-send" style="display:none; width:36px; height:36px;">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>
          </svg>
        </button>
      </div>
    </footer>
  </div>

  <!-- 添加导航模态框 -->
  <div class="modal-overlay" id="nav-modal">
    <div class="modal">
      <div class="modal-header">
        <h3 class="modal-title">添加快捷导航</h3>
        <button class="btn btn-icon btn-ghost modal-close-btn">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M18 6 6 18"/><path d="m6 6 12 12"/>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label class="form-label">名称</label>
          <input type="text" class="input" id="nav-title" placeholder="Google">
        </div>
        <div class="form-group">
          <label class="form-label">网址</label>
          <input type="text" class="input" id="nav-url" placeholder="https://google.com">
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary modal-close-btn">取消</button>
        <button class="btn btn-primary" id="nav-save">添加</button>
      </div>
    </div>
  </div>

  <!-- 添加收藏模态框 -->
  <div class="modal-overlay" id="bookmark-modal">
    <div class="modal">
      <div class="modal-header">
        <h3 class="modal-title">添加收藏</h3>
        <button class="btn btn-icon btn-ghost modal-close-btn">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M18 6 6 18"/><path d="m6 6 12 12"/>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label class="form-label">标题</label>
          <input type="text" class="input" id="bookmark-title" placeholder="文章标题">
        </div>
        <div class="form-group">
          <label class="form-label">网址</label>
          <input type="text" class="input" id="bookmark-url" placeholder="https://...">
        </div>
        <div class="form-group">
          <label class="form-label">描述 (可选)</label>
          <input type="text" class="input" id="bookmark-desc" placeholder="简短描述">
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary modal-close-btn">取消</button>
        <button class="btn btn-primary" id="bookmark-save">添加</button>
      </div>
    </div>
  </div>

  <!-- 添加指令模态框 -->
  <div class="modal-overlay" id="cmd-modal">
    <div class="modal">
      <div class="modal-header">
        <h3 class="modal-title">添加指令</h3>
        <button class="btn btn-icon btn-ghost modal-close-btn">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M18 6 6 18"/><path d="m6 6 12 12"/>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label class="form-label">名称</label>
          <input type="text" class="input" id="cmd-title" placeholder="Git 提交">
        </div>
        <div class="form-group">
          <label class="form-label">指令内容</label>
          <textarea class="input" id="cmd-code" rows="4" placeholder="git add . && git commit -m ''"></textarea>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary modal-close-btn">取消</button>
        <button class="btn btn-primary" id="cmd-save">添加</button>
      </div>
    </div>
  </div>

  <!-- 添加/编辑提示词模态框 -->
  <div class="modal-overlay" id="prompt-modal">
    <div class="modal" style="max-width: 340px;">
      <div class="modal-header">
        <h3 class="modal-title" id="prompt-modal-title">添加提示词</h3>
        <button class="btn btn-icon btn-ghost modal-close-btn">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M18 6 6 18"/><path d="m6 6 12 12"/>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label class="form-label">标题</label>
          <input type="text" class="input" id="prompt-title" placeholder="Python 专家">
        </div>
        <div class="form-group">
          <label class="form-label">标签 (用空格分隔)</label>
          <input type="text" class="input" id="prompt-tags" placeholder="编程 效率">
        </div>
        <div class="form-group">
          <label class="form-label">内容</label>
          <textarea class="input" id="prompt-content" rows="6" placeholder="你是一个资深的 Python 开发者..."></textarea>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-danger" id="prompt-delete" style="display: none; margin-right: auto;">删除</button>
        <button class="btn btn-secondary modal-close-btn">取消</button>
        <button class="btn btn-primary" id="prompt-save">保存</button>
      </div>
    </div>
  </div>

  <!-- 添加待办模态框 -->
  <div class="modal-overlay" id="todo-modal">
    <div class="modal">
      <div class="modal-header">
        <h3 class="modal-title" id="todo-modal-title">添加待办</h3>
        <button class="btn btn-icon btn-ghost modal-close-btn">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M18 6 6 18"/><path d="m6 6 12 12"/>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label class="form-label">任务内容</label>
          <input type="text" class="input" id="todo-text" placeholder="完成项目报告">
        </div>

        <div class="form-group">
          <label class="form-label">开始时间</label>
          <div class="date-selector">
            <label class="date-option">
              <input type="radio" name="date-type" value="today" checked>
              <span class="date-badge">今天</span>
            </label>
            <label class="date-option">
              <input type="radio" name="date-type" value="tomorrow">
              <span class="date-badge">明天</span>
            </label>
            <label class="date-option">
              <input type="radio" name="date-type" value="thisweek">
              <span class="date-badge">本周</span>
            </label>
            <label class="date-option">
              <input type="radio" name="date-type" value="other">
              <span class="date-badge">其他</span>
            </label>
          </div>
          <input type="date" class="input" id="todo-custom-date" style="display:none; margin-top: 8px;">
        </div>

        <div class="form-group">
          <label class="toggle-label">
            <input type="checkbox" id="todo-reminder-enabled" class="toggle-input">
            <span class="toggle-switch"></span>
            <span>开启提醒</span>
          </label>
          <div id="todo-reminder-time-container" style="display:none; margin-top: 8px;">
            <label class="form-label" style="margin-bottom: 8px;">提醒时间</label>
            <input type="time" class="input" id="todo-reminder-time" value="18:00">
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">优先级</label>
          <div class="priority-selector">
            <label class="priority-option">
              <input type="radio" name="priority" value="low" checked>
              <span class="priority-badge priority-low">低</span>
            </label>
            <label class="priority-option">
              <input type="radio" name="priority" value="medium">
              <span class="priority-badge priority-medium">中</span>
            </label>
            <label class="priority-option">
              <input type="radio" name="priority" value="high">
              <span class="priority-badge priority-high">高</span>
            </label>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary modal-close-btn">取消</button>
        <button class="btn btn-primary" id="todo-save">保存</button>
      </div>
    </div>
  </div>

  <!-- 设置主密码模态框 -->
  <div class="modal-overlay" id="vault-setup-modal">
    <div class="modal modal-sm">
      <div class="modal-header">
        <h3 class="modal-title">设置主密码</h3>
      </div>
      <div class="modal-body">
        <p style="color: var(--text-secondary); font-size: 14px; margin-bottom: 16px;">
          请设置4位数字密码，用于保护您的账户密钥
        </p>
        <div class="form-group">
          <label class="form-label">输入密码</label>
          <input type="password" class="input" id="vault-setup-pin" maxlength="4" placeholder="4位数字">
        </div>
        <div class="form-group">
          <label class="form-label">确认密码</label>
          <input type="password" class="input" id="vault-setup-pin-confirm" maxlength="4" placeholder="再次输入">
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-primary" id="vault-setup-save" style="width: 100%;">确认设置</button>
      </div>
    </div>
  </div>

  <!-- 验证主密码模态框 -->
  <div class="modal-overlay" id="vault-verify-modal">
    <div class="modal modal-sm">
      <div class="modal-header">
        <h3 class="modal-title">验证密码</h3>
        <button class="btn btn-icon btn-ghost" id="vault-verify-close">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M18 6 6 18"/><path d="m6 6 12 12"/>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <p style="color: var(--text-secondary); font-size: 14px; margin-bottom: 16px;">
          请输入4位数字密码
        </p>
        <div class="form-group">
          <input type="password" class="input" id="vault-verify-pin" maxlength="4" placeholder="输入密码">
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="vault-verify-cancel">取消</button>
        <button class="btn btn-primary" id="vault-verify-submit">验证</button>
      </div>
    </div>
  </div>

  <!-- Toast 通知 -->
  <div class="toast" id="toast"></div>

  <!-- 隐藏的文件输入 -->
  <input type="file" id="import-file" accept=".json" style="display: none;">

  <!-- JS 模块 -->
  <script src="js/storage.js"></script>
  <script src="js/theme.js"></script>
  <script src="js/tabs.js"></script>
  <script src="js/navigation.js"></script>
  <script src="js/bookmark.js"></script>
  <script src="js/command.js"></script>
  <script src="js/prompt.js"></script>
  <script src="js/todo.js"></script>
  <script src="js/vault.js"></script>
  <script src="js/settings.js"></script>
  <script src="js/assistant.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
